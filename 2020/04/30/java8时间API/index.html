<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.4.1">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.1" color="#222">
  <link rel="alternate" href="/atom.xml" title="haominglfs的博客" type="application/atom+xml">

<link rel="stylesheet" href="/css/main.css?v=7.4.1">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.4.1',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="keywords" content="java8 时间">
<meta property="og:type" content="article">
<meta property="og:title" content="java8时间API">
<meta property="og:url" content="https://haominglfs.github.io/2020/04/30/java8时间API/index.html">
<meta property="og:site_name" content="haominglfs的博客">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/haominglfs/images/20200430173025.png">
<meta property="og:updated_time" content="2020-04-30T09:30:59.538Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="java8时间API">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/haominglfs/images/20200430173025.png">
  <link rel="canonical" href="https://haominglfs.github.io/2020/04/30/java8时间API/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>java8时间API | haominglfs的博客</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">haominglfs的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Let's coding!</p>
      
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger">
        
          <i class="fa fa-search fa-fw"></i>搜索</a>
      </li>
    
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
      <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block post">
    <link itemprop="mainEntityOfPage" href="https://haominglfs.github.io/2020/04/30/java8时间API/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="haominglfs">
      <meta itemprop="description" content="A programmer's blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="haominglfs的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">java8时间API

          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2020-04-30 10:04:07 / 修改时间：17:30:59" itemprop="dateCreated datePublished" datetime="2020-04-30T10:04:07+08:00">2020-04-30</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a></span>

                
                
              
            </span>
          

          
          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">本文字数：</span>
              
              <span>7.5k</span>
            </span>
          
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              
              <span>12 分钟</span>
            </span>
          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><img src="https://cdn.jsdelivr.net/gh/haominglfs/images/20200430173025.png" alt></p>
<a id="more"></a>
<h3 id="Java8之前的日期时间API"><a href="#Java8之前的日期时间API" class="headerlink" title="Java8之前的日期时间API"></a>Java8之前的日期时间API</h3><h4 id="表示时刻信息的-Date"><a href="#表示时刻信息的-Date" class="headerlink" title="表示时刻信息的 Date"></a>表示时刻信息的 Date</h4><h5 id="Date的设计饱受诟病，其缺陷包括但不限于："><a href="#Date的设计饱受诟病，其缺陷包括但不限于：" class="headerlink" title="Date的设计饱受诟病，其缺陷包括但不限于："></a>Date的设计饱受诟病，其缺陷包括但不限于：</h5><ul>
<li>类名误导，该类实际上不仅反映日期，还反映时间</li>
<li>方法名误导，getDate()返回日期中的天，getDay()返回的是周几</li>
<li>年份是与1900年的差值，可读性极差</li>
<li>月份是从0计数的，可读性极差</li>
<li>周几是相对于周日的差值，可读性极差</li>
<li>不提供时区设置，内部总是使用本地时区</li>
<li>不提供历法设置，内部使用格里历或儒略历</li>
<li>不提供格式化的转换，从字符串中解析日期时相当难用</li>
<li>参数返回太随意，比如设置1月33日，实际是2月2日</li>
<li>存在同名类，java.sql包下依然有一个作用相同的Date类</li>
<li>该类允许扩展，实际上，应当把日期-时间类设计为不可变的final类</li>
</ul>
<h5 id="当前定位"><a href="#当前定位" class="headerlink" title="当前定位"></a>当前定位</h5><p>Date 的目前定位是，<strong>唯一表示一个时刻</strong>，现在的 Date 类中接近百分之八十的方法都已废弃，被标记为 @Deprecated。还有几个为数不多没有被废弃的方法：</p>
<ul>
<li><code>public long getTime()</code>：返回内部存储的毫秒数</li>
<li><code>public void setTime(long time)</code>：重新设置内存的毫秒数</li>
<li><code>public boolean before(Date when)</code>：比较给定的时刻是否早于当前 Date 实例</li>
<li><code>public boolean after(Date when)</code>：比较给定的时刻是否晚于当前 Date 实例</li>
</ul>
<h4 id="描述年历的-Calendar"><a href="#描述年历的-Calendar" class="headerlink" title="描述年历的 Calendar"></a>描述年历的 Calendar</h4><p>Calendar 用于表示年月日等日期信息，它是一个抽象类，一般通过以下四种工厂方法获取它的实例对象:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Calendar <span class="title">getInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Calendar <span class="title">getInstance</span><span class="params">(TimeZone zone)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Calendar <span class="title">getInstance</span><span class="params">(Locale aLocale)</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Calendar <span class="title">getInstance</span><span class="params">(TimeZone zone,Locale aLocale)</span></span></span><br><span class="line"><span class="function"><span class="comment">//最终调用的方法，因为不同的时区与国家语言对于时刻和年月日信息的输出是不同的，所以这也是为什么一个 Calendar 实例必须传入时区和国家信息的一个原因</span></span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Calendar <span class="title">createCalendar</span><span class="params">(TimeZone zone,Locale aLocale)</span></span></span><br></pre></td></tr></table></figure>
<h4 id="DateFormat-格式化转换"><a href="#DateFormat-格式化转换" class="headerlink" title="DateFormat 格式化转换"></a>DateFormat 格式化转换</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DateFormat dateFormat = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy年MM月dd日"</span>);</span><br><span class="line"><span class="comment">//将一个日期对象格式化为字符串</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> String <span class="title">format</span><span class="params">(Date date)</span></span></span><br><span class="line"><span class="function"><span class="comment">//将一个格式化的字符串装换为一个日期对象</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Date <span class="title">parse</span><span class="params">(String source)</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>yyyy：年份用四位进行输出</p>
</li>
<li><p>MM：月份用两位进行输出</p>
</li>
<li><p>dd：两位表示日信息</p>
</li>
<li><p>HH：两位来表示小时数</p>
</li>
<li><p>mm：两位表示分钟数</p>
</li>
<li><p>ss：两位来表示秒数</p>
</li>
<li><p>E：表示周几，如果 Locale 在中国则会输出 星期x，如果在美国或英国则会输出英文的星期</p>
</li>
<li><p>a：表示上午或下午</p>
</li>
</ul>
<h3 id="Java8-的时间日期-API"><a href="#Java8-的时间日期-API" class="headerlink" title="Java8 的时间日期 API"></a>Java8 的时间日期 API</h3><p>Java 8的日期和时间类包括Instant、Duration、Period、LocalDate、LocalTime、LocalDateTime，这些类都包含在java.time包中。</p>
<h4 id="表示时刻的-Instant"><a href="#表示时刻的-Instant" class="headerlink" title="表示时刻的 Instant"></a>表示时刻的 Instant</h4><p>Instant是时间线上的一个点，表示一个时间戳。Instant可以精确到纳秒，这超过了long的最大表示范围，所以在Instant的实现中是分成了两部分来表示，一部分是<code>seconds</code>，表示从1970-01-01 00:00:00开始到现在的秒数，另一个部分是<code>nanos</code>，表示纳秒部分。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据系统当前时间创建一个 Instant 实例，表示当前时刻</span></span><br><span class="line">Instant now = Instant.now(); </span><br><span class="line"><span class="comment">//通过传入一个标准时间的偏移值来构建一个 Instant 实例</span></span><br><span class="line">Instant instant = Instant.ofEpochSecond(<span class="keyword">long</span> epochSecond, <span class="keyword">long</span> nanoAdjustment);</span><br><span class="line"><span class="comment">//通过毫秒数值直接构建一个 Instant 实例</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Instant <span class="title">ofEpochMilli</span><span class="params">(<span class="keyword">long</span> epochMilli)</span>；</span></span><br></pre></td></tr></table></figure>
<h4 id="时间段Duration"><a href="#时间段Duration" class="headerlink" title="时间段Duration"></a>时间段Duration</h4><p>Duration是两个时间戳的差值，使用java.time中的时间戳类，例如Instant、LocalDateTime等实现了Temporal类的日期时间类为参数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">LocalDateTime from = LocalDateTime.of(<span class="number">2020</span>,<span class="number">4</span>, <span class="number">22</span>, <span class="number">16</span>, <span class="number">6</span>, <span class="number">0</span>);</span><br><span class="line">LocalDateTime to = LocalDateTime.of(<span class="number">2020</span>,<span class="number">5</span>, <span class="number">22</span>, <span class="number">16</span>, <span class="number">6</span>, <span class="number">0</span>);</span><br><span class="line">Duration duration = Duration.between(from, to);</span><br><span class="line"></span><br><span class="line">Duration duration1 = Duration.of(<span class="number">5</span>, ChronoUnit.DAYS);       <span class="comment">// 5天</span></span><br><span class="line">Duration duration2 = Duration.of(<span class="number">1000</span>, ChronoUnit.MILLIS);  <span class="comment">// 1000毫秒</span></span><br></pre></td></tr></table></figure>
<h4 id="日期段Period"><a href="#日期段Period" class="headerlink" title="日期段Period"></a>日期段Period</h4><p>Period是以年月日来衡量一个时间段，由于Period是以年月日衡量时间段，所以between()方法只能接收LocalDate类型的参数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2020-03-22 到 2020-04-22 这段时间</span></span><br><span class="line">Period period = Period.between(LocalDate.of(<span class="number">2020</span>, <span class="number">3</span>, <span class="number">22</span>),LocalDate.of(<span class="number">2020</span>, <span class="number">4</span>, <span class="number">22</span>));</span><br></pre></td></tr></table></figure>
<h4 id="处理日期的-LocalDate"><a href="#处理日期的-LocalDate" class="headerlink" title="处理日期的 LocalDate"></a>处理日期的 LocalDate</h4><p>LocalDate 是一个不可变类，它关注时间中年月日部分。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用当前系统时间的年月日信息初始化一个实例对象</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LocalDate <span class="title">now</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">//显式指定年月日信息</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LocalDate <span class="title">of</span><span class="params">(<span class="keyword">int</span> year, <span class="keyword">int</span> month, <span class="keyword">int</span> dayOfMonth)</span></span>;</span><br><span class="line"><span class="comment">//根据 dayOfYear 可以推出 month 和 dayOfMonth</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LocalDate <span class="title">ofYearDay</span><span class="params">(<span class="keyword">int</span> year, <span class="keyword">int</span> dayOfYear)</span></span>;</span><br><span class="line"><span class="comment">//相对于格林零时区时间的日偏移量</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LocalDate <span class="title">ofEpochDay</span><span class="params">(<span class="keyword">long</span> epochDay)</span></span>;</span><br><span class="line"></span><br><span class="line">LocalDate localDate = LocalDate.of(<span class="number">2020</span>, <span class="number">4</span>, <span class="number">22</span>);     <span class="comment">// 初始化一个日期：2022-04-22</span></span><br><span class="line"><span class="keyword">int</span> year = localDate.getYear();                     <span class="comment">// 年份：2020</span></span><br><span class="line">Month month = localDate.getMonth();                 <span class="comment">// 月份：MARCH</span></span><br><span class="line"><span class="keyword">int</span> dayOfMonth = localDate.getDayOfMonth();         <span class="comment">// 月份中的第几天：22</span></span><br><span class="line">DayOfWeek dayOfWeek = localDate.getDayOfWeek();     <span class="comment">// 一周的第几天：FRIDAY</span></span><br><span class="line"><span class="keyword">int</span> length = localDate.lengthOfMonth();             <span class="comment">// 月份的天数：30</span></span><br><span class="line"><span class="keyword">boolean</span> leapYear = localDate.isLeapYear();          <span class="comment">// 是否为闰年：true</span></span><br></pre></td></tr></table></figure>
<h4 id="处理时间的-LocalTime"><a href="#处理时间的-LocalTime" class="headerlink" title="处理时间的 LocalTime"></a>处理时间的 LocalTime</h4><p>类似于 LocalDate，LocalTime 专注于时间的处理</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据系统当前时刻获取其中的时间部分内容</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LocalTime <span class="title">now</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">//显式传入小时和分钟来构建一个实例对象</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LocalTime <span class="title">of</span><span class="params">(<span class="keyword">int</span> hour, <span class="keyword">int</span> minute)</span></span>;</span><br><span class="line"><span class="comment">//通过传入时分秒构造实例</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LocalTime <span class="title">of</span><span class="params">(<span class="keyword">int</span> hour, <span class="keyword">int</span> minute, <span class="keyword">int</span> second)</span></span>;</span><br><span class="line"><span class="comment">//传入时分秒和纳秒构建一个实例</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LocalTime <span class="title">of</span><span class="params">(<span class="keyword">int</span> hour, <span class="keyword">int</span> minute, <span class="keyword">int</span> second, <span class="keyword">int</span> nanoOfSecond)</span></span>;</span><br><span class="line"><span class="comment">//传入一个长整型数值代表当前日已经过去的秒数</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LocalTime <span class="title">ofSecondOfDay</span><span class="params">(<span class="keyword">long</span> secondOfDay)</span></span>;</span><br><span class="line"><span class="comment">//传入一个长整型代表当前日已经过去的纳秒数</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> LocalTime <span class="title">ofNanoOfDay</span><span class="params">(<span class="keyword">long</span> nanoOfDay)</span></span>;</span><br><span class="line"></span><br><span class="line">LocalTime localTime = LocalTime.of(<span class="number">16</span>, <span class="number">25</span>, <span class="number">52</span>);     <span class="comment">// 初始化一个时间：16:25:52</span></span><br><span class="line"><span class="keyword">int</span> hour = localTime.getHour();                     <span class="comment">// 时：16</span></span><br><span class="line"><span class="keyword">int</span> minute = localTime.getMinute();                 <span class="comment">// 分：25</span></span><br><span class="line"><span class="keyword">int</span> second = localTime.getSecond();                 <span class="comment">// 秒：52</span></span><br></pre></td></tr></table></figure>
<h4 id="处理日期和时间的-LocalDateTime"><a href="#处理日期和时间的-LocalDateTime" class="headerlink" title="处理日期和时间的 LocalDateTime"></a>处理日期和时间的 LocalDateTime</h4><p>LocalDateTime类是LocalDate和LocalTime的结合体</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过of()方法直接创建</span></span><br><span class="line">LocalDateTime ldt1 = LocalDateTime.of(<span class="number">2020</span>, Month.FEBRUARY, <span class="number">22</span>, <span class="number">16</span>, <span class="number">23</span>, <span class="number">12</span>);</span><br><span class="line"><span class="comment">//可以调用LocalDate的atTime()方法或LocalTime的atDate()方法将LocalDate或LocalTime合并成一个LocalDateTime</span></span><br><span class="line">LocalDate localDate = LocalDate.of(<span class="number">2020</span>, Month.FEBRUARY, <span class="number">22</span>);</span><br><span class="line">LocalTime localTime = LocalTime.of(<span class="number">16</span>, <span class="number">23</span>, <span class="number">12</span>);</span><br><span class="line">LocalDateTime ldt2 = localDate.atTime(localTime);</span><br><span class="line"></span><br><span class="line"><span class="comment">//向LocalDate和LocalTime的转化</span></span><br><span class="line">LocalDate date = ldt1.toLocalDate();</span><br><span class="line">LocalTime time = ldt1.toLocalTime();</span><br></pre></td></tr></table></figure>
<h4 id="日期操作"><a href="#日期操作" class="headerlink" title="日期操作"></a>日期操作</h4><p>比较简单的日期操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//比较简单的日期操作</span></span><br><span class="line">LocalDate date = LocalDate.of(<span class="number">2020</span>, <span class="number">4</span>, <span class="number">22</span>);          <span class="comment">// 2020-04-22</span></span><br><span class="line">LocalDate date1 = date.withYear(<span class="number">2021</span>);              <span class="comment">// 修改为 2021-04-22</span></span><br><span class="line">LocalDate date2 = date.withMonth(<span class="number">3</span>);                <span class="comment">// 修改为 2020-03-22</span></span><br><span class="line">LocalDate date3 = date.withDayOfMonth(<span class="number">1</span>);           <span class="comment">// 修改为 2020-04-01</span></span><br><span class="line">LocalDate date4 = date.plusYears(<span class="number">1</span>);                <span class="comment">// 增加一年 2021-04-22</span></span><br><span class="line">LocalDate date5 = date.minusMonths(<span class="number">2</span>);              <span class="comment">// 减少两个月，到2020年的2月</span></span><br><span class="line">LocalDate date6 = date.plus(<span class="number">5</span>, ChronoUnit.DAYS);    <span class="comment">// 增加5天 2020-04-27</span></span><br></pre></td></tr></table></figure>
<p>比较复杂的日期操作，比如将时间调到下一个工作日，或者是下个月的最后一天，这时候我们可以使用with()方法的另一个重载方法，它接收一个TemporalAdjuster参数，可以使我们更加灵活的调整日期：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//返回下一个距离当前时间最近的星期日</span></span><br><span class="line">LocalDate date7 = date.with(TemporalAdjusters.nextOrSame(DayOfWeek.SUNDAY));</span><br><span class="line"><span class="comment">// 返回本月最后衣蛾周六</span></span><br><span class="line">LocalDate date9 = date.with(TemporalAdjusters.lastInMonth(DayOfWeek.SATURDAY));</span><br></pre></td></tr></table></figure>
<p>下面列出时间调节器类TemporalAdjuster提供的一些方法</p>
<table>
<thead>
<tr>
<th><strong>方法名</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>dayOfWeekInMonth</td>
<td>返回同一个月中每周的第几天</td>
</tr>
<tr>
<td>firstDayOfMonth</td>
<td>返回当月的第一天</td>
</tr>
<tr>
<td>firstDayOfNextMonth</td>
<td>返回下月的第一天</td>
</tr>
<tr>
<td>firstDayOfNextYear</td>
<td>返回下一年的第一天</td>
</tr>
<tr>
<td>firstDayOfYear</td>
<td>返回本年的第一天</td>
</tr>
<tr>
<td>firstInMonth</td>
<td>返回同一个月中第一个星期几</td>
</tr>
<tr>
<td>lastDayOfMonth</td>
<td>返回当月的最后一天</td>
</tr>
<tr>
<td>lastDayOfNextMonth</td>
<td>返回下月的最后一天</td>
</tr>
<tr>
<td>lastDayOfNextYear</td>
<td>返回下一年的最后一天</td>
</tr>
<tr>
<td>lastDayOfYear</td>
<td>返回本年的最后一天</td>
</tr>
<tr>
<td>lastInMonth</td>
<td>返回同一个月中最后一个星期几</td>
</tr>
<tr>
<td>next / previous</td>
<td>返回后一个/前一个给定的星期几</td>
</tr>
<tr>
<td>nextOrSame / previousOrSame</td>
<td>返回后一个/前一个给定的星期几，如果这个值满足条件，直接返回</td>
</tr>
</tbody>
</table>
<h4 id="时区"><a href="#时区" class="headerlink" title="时区"></a>时区</h4><h5 id="ZoneId"><a href="#ZoneId" class="headerlink" title="ZoneId"></a>ZoneId</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接收一个“区域/城市”的字符串作为参数</span></span><br><span class="line">ZoneId shanghaiZoneId = ZoneId.of(<span class="string">"Asia/Shanghai"</span>);</span><br><span class="line"><span class="comment">//获取系统默认时区</span></span><br><span class="line">ZoneId systemZoneId = ZoneId.systemDefault();</span><br><span class="line"><span class="comment">//获取所有合法的“区域/城市”字符串</span></span><br><span class="line">Set&lt;String&gt; zoneIds = ZoneId.getAvailableZoneIds();</span><br></pre></td></tr></table></figure>
<h5 id="ZonedDateTime"><a href="#ZonedDateTime" class="headerlink" title="ZonedDateTime"></a>ZonedDateTime</h5><p>ZonedDateTime 可以被理解为 LocalDateTime 的外层封装，它的内部存储了一个 LocalDateTime 的实例，专门用于普通的日期时间处理。此外，它还定义了 ZoneId 和 ZoneOffset 来描述时区的概念。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//系统将以默认时区计算并存储日期时间信息</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ZonedDateTime <span class="title">now</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">//指定时区</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ZonedDateTime <span class="title">now</span><span class="params">(ZoneId zone)</span></span>;</span><br><span class="line"><span class="comment">//指定日期时间和时区</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ZonedDateTime <span class="title">of</span><span class="params">(LocalDate date, LocalTime time, ZoneId zone)</span>：</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ZonedDateTime <span class="title">of</span><span class="params">(LocalDateTime localDateTime, ZoneId zone)</span></span></span><br><span class="line"><span class="function"><span class="comment">//通过时刻和时区构建实例对象</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ZonedDateTime <span class="title">ofInstant</span><span class="params">(Instant instant, ZoneId zone)</span>：</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//有了ZoneId，我们就可以将一个LocalDate、LocalTime或LocalDateTime对象转化为ZonedDateTime对象：</span></span></span><br><span class="line"><span class="function">LocalDateTime localDateTime </span>= LocalDateTime.now();</span><br><span class="line">ZonedDateTime zonedDateTime = ZonedDateTime.of(localDateTime, shanghaiZoneId);</span><br></pre></td></tr></table></figure>
<h4 id="格式化日期时间"><a href="#格式化日期时间" class="headerlink" title="格式化日期时间"></a>格式化日期时间</h4><p>DateTimeFormatter 作为格式化日期时间的主要类，它与之前的 DateFormat 类最大的不同就在于它是线程安全的，其他的使用上的操作基本类似。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DateTimeFormatter formatter = DateTimeFormatter.ofPattern(<span class="string">"yyyy年MM月dd日 HH:mm:ss"</span>);</span><br><span class="line">LocalDateTime localDateTime = LocalDateTime.now();</span><br><span class="line">formatter.format(localDateTime);</span><br><span class="line"></span><br><span class="line">String str = <span class="string">"2020年04月23日 23:59:59"</span>;</span><br><span class="line">DateTimeFormatter formatter2 = DateTimeFormatter.ofPattern(<span class="string">"yyyy年MM月dd日 HH:mm:ss"</span>);</span><br><span class="line">LocalDateTime localDateTime2 = LocalDateTime.parse(str,formatter2);</span><br></pre></td></tr></table></figure>
<h3 id="世界标准时间（UTC）-格林威治时间（GMT）"><a href="#世界标准时间（UTC）-格林威治时间（GMT）" class="headerlink" title="世界标准时间（UTC）/格林威治时间（GMT）"></a>世界标准时间（UTC）/格林威治时间（GMT）</h3><p>UTC是协调世界时(Universal Time Coordinated)英文缩写，是由国际无线电咨询委员会规定和推荐,并由<a href="https://www.baidu.com/s?wd=国际时间局&amp;tn=SE_PcZhidaonwhc_ngpagmjz&amp;rsv_dl=gh_pc_zhidao" target="_blank" rel="noopener">国际时间局</a>(BIH)负责保持的以秒为基础的时间标度。UTC相当于<a href="https://www.baidu.com/s?wd=本初子午线&amp;tn=SE_PcZhidaonwhc_ngpagmjz&amp;rsv_dl=gh_pc_zhidao" target="_blank" rel="noopener">本初子午线</a>(即经度0度)上的平均太阳时，过去曾用<a href="https://www.baidu.com/s?wd=格林威治&amp;tn=SE_PcZhidaonwhc_ngpagmjz&amp;rsv_dl=gh_pc_zhidao" target="_blank" rel="noopener">格林威治</a>平均时(GMT)来表示.<a href="https://www.baidu.com/s?wd=北京时间&amp;tn=SE_PcZhidaonwhc_ngpagmjz&amp;rsv_dl=gh_pc_zhidao" target="_blank" rel="noopener">北京时间</a>比UTC时间早8小时，以1999年1月1日0000UTC为例，UTC时间是零点，<a href="https://www.baidu.com/s?wd=北京时间&amp;tn=SE_PcZhidaonwhc_ngpagmjz&amp;rsv_dl=gh_pc_zhidao" target="_blank" rel="noopener">北京时间</a>为1999年1月1日早上8点整。</p>
<p>具体参考：<a href="https://pansci.asia/archives/84978" target="_blank" rel="noopener">https://pansci.asia/archives/84978</a></p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://www.cnblogs.com/mcbye/p/java8-date-time-api.html" target="_blank" rel="noopener">https://www.cnblogs.com/mcbye/p/java8-date-time-api.html</a></p>
<p><a href="https://juejin.im/post/5addc7a66fb9a07aa43bd2a0#heading-5" target="_blank" rel="noopener">https://juejin.im/post/5addc7a66fb9a07aa43bd2a0#heading-5</a></p>
<p><a href="https://www.jianshu.com/p/68d8291c3bd5" target="_blank" rel="noopener">https://www.jianshu.com/p/68d8291c3bd5</a></p>

    </div>

    
    
    
        <div id="wechat_subscriber" style="display: block; padding: 10px 0; margin: 20px auto; width: 100%; text-align: center;">
  <img id="wechat_subscriber_qcode" src="/uploads/wechat-qcode.jpg" alt="haominglfs wechat" style="width: 200px; max-width: 100%;">
  <div>欢迎您扫一扫上面的微信公众号，订阅我的博客！</div>
</div>

      
        
      

      <footer class="post-footer">
          
            
          
          <div class="post-tags">
            
              <a href="/tags/java8-时间/" rel="tag"># java8 时间</a>
            
          </div>
        

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2020/04/29/ideaVim安装配置/" rel="next" title="ideaVim安装配置">
                  <i class="fa fa-chevron-left"></i> ideaVim安装配置
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/2020/05/15/python学习/" rel="prev" title="python学习">
                  python学习 <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          
    
    <div class="comments" id="gitalk-container"></div>
  

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Java8之前的日期时间API"><span class="nav-number">1.</span> <span class="nav-text">Java8之前的日期时间API</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#表示时刻信息的-Date"><span class="nav-number">1.1.</span> <span class="nav-text">表示时刻信息的 Date</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Date的设计饱受诟病，其缺陷包括但不限于："><span class="nav-number">1.1.1.</span> <span class="nav-text">Date的设计饱受诟病，其缺陷包括但不限于：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#当前定位"><span class="nav-number">1.1.2.</span> <span class="nav-text">当前定位</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#描述年历的-Calendar"><span class="nav-number">1.2.</span> <span class="nav-text">描述年历的 Calendar</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DateFormat-格式化转换"><span class="nav-number">1.3.</span> <span class="nav-text">DateFormat 格式化转换</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Java8-的时间日期-API"><span class="nav-number">2.</span> <span class="nav-text">Java8 的时间日期 API</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#表示时刻的-Instant"><span class="nav-number">2.1.</span> <span class="nav-text">表示时刻的 Instant</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#时间段Duration"><span class="nav-number">2.2.</span> <span class="nav-text">时间段Duration</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#日期段Period"><span class="nav-number">2.3.</span> <span class="nav-text">日期段Period</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#处理日期的-LocalDate"><span class="nav-number">2.4.</span> <span class="nav-text">处理日期的 LocalDate</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#处理时间的-LocalTime"><span class="nav-number">2.5.</span> <span class="nav-text">处理时间的 LocalTime</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#处理日期和时间的-LocalDateTime"><span class="nav-number">2.6.</span> <span class="nav-text">处理日期和时间的 LocalDateTime</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#日期操作"><span class="nav-number">2.7.</span> <span class="nav-text">日期操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#时区"><span class="nav-number">2.8.</span> <span class="nav-text">时区</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#ZoneId"><span class="nav-number">2.8.1.</span> <span class="nav-text">ZoneId</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ZonedDateTime"><span class="nav-number">2.8.2.</span> <span class="nav-text">ZonedDateTime</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#格式化日期时间"><span class="nav-number">2.9.</span> <span class="nav-text">格式化日期时间</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#世界标准时间（UTC）-格林威治时间（GMT）"><span class="nav-number">3.</span> <span class="nav-text">世界标准时间（UTC）/格林威治时间（GMT）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#参考"><span class="nav-number">4.</span> <span class="nav-text">参考</span></a></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">haominglfs</p>
  <div class="site-description" itemprop="description">A programmer's blog</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">92</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>
</div>
  <div class="feed-link motion-element">
    <a href="/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/haominglfs" title="GitHub &rarr; https://github.com/haominglfs" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="mailto:haominglfs@163.com" title="E-Mail &rarr; mailto:haominglfs@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-haominglfs"></i>E-Mail</a>
      </span>
    
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 – <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">haominglfs</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="站点总字数">312k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">8:40</span>
</div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.1"></script><script src="/js/motion.js?v=7.4.1"></script>
<script src="/js/schemes/pisces.js?v=7.4.1"></script>
<script src="/js/next-boot.js?v=7.4.1"></script>



  








  <script src="/js/local-search.js?v=7.4.1"></script>














  

  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: 'ff50d69081e9281e438b',
      clientSecret: '0be546000d62d416755a762d27474c05ac6e0862',
      repo: 'haominglfs.github.io',
      owner: 'haominglfs',
      admin: ['haominglfs'],
      id: '274902da72b0bf7ff3cd2f4afc0b9b92',
        language: 'zh-CN',
      
      distractionFreeMode: 'true'
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
</script>

</body>
</html>
